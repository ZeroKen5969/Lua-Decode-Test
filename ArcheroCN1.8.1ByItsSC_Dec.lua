L0_0 = gg
L0_0 = L0_0.require
L0_0("81.0")
L0_0 = {
  {
    "武器升级卷轴",
    "30101"
  },
  {
    "护甲升级卷轴",
    "30102"
  },
  {
    "戒指升级卷轴",
    "30103"
  },
  {
    "跟班升级卷轴",
    "30104"
  },
  {
    "传说勇者长弓",
    "1010106"
  },
  {
    "完美史诗勇者长弓",
    "1010105"
  },
  {
    "史诗勇者长弓",
    "1010104"
  },
  {
    "稀有勇者长弓",
    "1010103"
  },
  {
    "精良勇者长弓",
    "1010102"
  },
  {
    "普通勇者长弓",
    "1010101"
  },
  {
    "传说死亡镰刀",
    "1010206"
  },
  {
    "完美史诗死亡镰刀",
    "1010205"
  },
  {
    "史诗死亡镰刀",
    "1010204"
  },
  {
    "稀有死亡镰刀",
    "1010203"
  },
  {
    "精良死亡镰刀",
    "1010202"
  },
  {
    "普通死亡镰刀",
    "1010201"
  },
  {
    "传说锯齿飞刀",
    "1010306"
  },
  {
    "完美史诗锯齿飞刀",
    "1010305"
  },
  {
    "史诗锯齿飞刀",
    "1010304"
  },
  {
    "稀有锯齿飞刀",
    "1010303"
  },
  {
    "精良锯齿飞刀",
    "1010302"
  },
  {
    "普通锯齿飞刀",
    "1010301"
  },
  {
    "传说龙卷",
    "1010406"
  },
  {
    "完美史诗龙卷",
    "1010405"
  },
  {
    "史诗龙卷",
    "1010404"
  },
  {
    "稀有龙卷",
    "1010403"
  },
  {
    "精良龙卷",
    "1010402"
  },
  {
    "普通龙卷",
    "1010401"
  },
  {
    "传说黄金胸甲",
    "1020106"
  },
  {
    "完美史诗黄金胸甲",
    "1020105"
  },
  {
    "史诗黄金胸甲",
    "1020104"
  },
  {
    "稀有黄金胸甲",
    "1020103"
  },
  {
    "精良黄金胸甲",
    "1020102"
  },
  {
    "普通黄金胸甲",
    "1020101"
  },
  {
    "传说灵巧束衣",
    "1020206"
  },
  {
    "完美史诗灵巧束衣",
    "1020205"
  },
  {
    "史诗灵巧束衣",
    "1020204"
  },
  {
    "稀有灵巧束衣",
    "1020203"
  },
  {
    "精良灵巧束衣",
    "1020202"
  },
  {
    "普通灵巧束衣",
    "1020201"
  },
  {
    "传说幻影披风",
    "1020306"
  },
  {
    "完美史诗幻影披风",
    "1020305"
  },
  {
    "史诗幻影披风",
    "1020304"
  },
  {
    "稀有幻影披风",
    "1020303"
  },
  {
    "精良幻影披风",
    "1020302"
  },
  {
    "普通幻影披风",
    "1020301"
  },
  {
    "传说幽冥布袍",
    "1020406"
  },
  {
    "完美史诗幽冥布袍",
    "1020405"
  },
  {
    "史诗幽冥布袍",
    "1020404"
  },
  {
    "稀有幽冥布袍",
    "1020403"
  },
  {
    "精良幽冥布袍",
    "1020402"
  },
  {
    "普通幽冥布袍",
    "1020401"
  },
  {
    "传说巨熊之戒",
    "1030106"
  },
  {
    "完美史诗巨熊之戒",
    "1030105"
  },
  {
    "史诗巨熊之戒",
    "1030104"
  },
  {
    "稀有巨熊之戒",
    "1030103"
  },
  {
    "精良巨熊之戒",
    "1030102"
  },
  {
    "普通巨熊之戒",
    "1030101"
  },
  {
    "传说恶狼之戒",
    "1030206"
  },
  {
    "完美史诗恶狼之戒",
    "1030205"
  },
  {
    "史诗恶狼之戒",
    "1030204"
  },
  {
    "稀有恶狼之戒",
    "1030203"
  },
  {
    "精良恶狼之戒",
    "1030202"
  },
  {
    "普通恶狼之戒",
    "1030201"
  },
  {
    "传说猎鹰之戒",
    "1030306"
  },
  {
    "完美史诗猎鹰之戒",
    "1030305"
  },
  {
    "史诗猎鹰之戒",
    "1030304"
  },
  {
    "稀有猎鹰之戒",
    "1030303"
  },
  {
    "精良猎鹰之戒",
    "1030302"
  },
  {
    "普通猎鹰之戒",
    "1030301"
  },
  {
    "传说秘蛇之戒",
    "1030406"
  },
  {
    "完美史诗秘蛇之戒",
    "1030405"
  },
  {
    "史诗秘蛇之戒",
    "1030404"
  },
  {
    "稀有秘蛇之戒",
    "1030403"
  },
  {
    "精良秘蛇之戒",
    "1030402"
  },
  {
    "普通秘蛇之戒",
    "1030401"
  },
  {
    "传说精灵",
    "1040106"
  },
  {
    "完美史诗精灵",
    "1040105"
  },
  {
    "史诗精灵",
    "1040104"
  },
  {
    "稀有精灵",
    "1040103"
  },
  {
    "精良精灵",
    "1040102"
  },
  {
    "普通精灵",
    "1040101"
  },
  {
    "传说镰刀法师",
    "1040206"
  },
  {
    "完美史诗镰刀法师",
    "1040205"
  },
  {
    "史诗镰刀法师",
    "1040204"
  },
  {
    "稀有镰刀法师",
    "1040203"
  },
  {
    "精良镰刀法师",
    "1040202"
  },
  {
    "普通镰刀法师",
    "1040201"
  },
  {
    "传说炸弹人",
    "1040306"
  },
  {
    "完美史诗炸弹人",
    "1040305"
  },
  {
    "史诗炸弹人",
    "1040304"
  },
  {
    "稀有炸弹人",
    "1040303"
  },
  {
    "精良炸弹人",
    "1040302"
  },
  {
    "普通炸弹人",
    "1040301"
  },
  {
    "传说激光蝙蝠",
    "1040406"
  },
  {
    "完美史诗激光蝙蝠",
    "1040405"
  },
  {
    "史诗激光蝙蝠",
    "1040404"
  },
  {
    "稀有激光蝙蝠",
    "1040403"
  },
  {
    "精良激光蝙蝠",
    "1040402"
  },
  {
    "普通激光蝙蝠",
    "1040401"
  }
}
function getn(A0_1)
  local L1_2, L2_3
  L1_2 = 1
  repeat
    L2_3 = A0_1[L1_2]
    L1_2 = L1_2 + 1
  until L2_3 == nil
  L2_3 = L1_2 - 2
  return L2_3
end
function makemenu(A0_4)
  local L2_5
  L2_5 = {}
  for _FORV_5_ = 1, getn(A0_4) do
    L2_5[_FORV_5_] = A0_4[_FORV_5_][1]
  end
  return L2_5
end
function exe(A0_6)
  gg.setVisible(false)
  Aarr = gg.alert("在遇上神秘商家后并跟他交流才执行\n\n注释：旧方法已失效。", "继续", nil, "返回首页")
  if Aarr == nil then
    sleep(100)
  end
  if Aarr == 3 then
    main()
  end
  if Aarr == 1 then
    if not gg.choice(makemenu(A0_6), nil, "你想修改的物品是什么(神秘商人售卖的物品)") then
      main()
    end
    if gg.choice(makemenu(A0_6), nil, "你想修改的物品是什么(神秘商人售卖的物品)") == nil then
      main()
    end
    PI = gg.prompt({
      "物品的数量",
      "消耗金币还是宝石",
      "需要多少钱",
      "你想要的数量"
    }, {
      "例子：1",
      "金币 = 1 宝石 = 2",
      "例子:180",
      "例子:2000"
    }, {
      "number",
      "number",
      "number",
      "number"
    })
    if PI == nil then
      main()
    else
      if not gg.choice(makemenu(A0_6), nil, "选择你要得到的物品") then
        main()
      end
      if gg.choice(makemenu(A0_6), nil, "选择你要得到的物品") == nil then
        main()
      end
      code = A0_6[gg.choice(makemenu(A0_6), nil, "你想修改的物品是什么(神秘商人售卖的物品)")][2]
      code2 = A0_6[gg.choice(makemenu(A0_6), nil, "选择你要得到的物品")][2]
      codeName = A0_6[gg.choice(makemenu(A0_6), nil, "你想修改的物品是什么(神秘商人售卖的物品)")][1]
      codeName2 = A0_6[gg.choice(makemenu(A0_6), nil, "你想修改的物品是什么(神秘商人售卖的物品)")][1]
      gg.clearResults()
      gg.setVisible(false)
      gg.searchNumber(code .. ";" .. PI[1] .. ";" .. PI[2] .. ";" .. PI[3] .. ";100::17", 4)
      checkResultC()
      gg.getResults(100)
      editAll(code2 .. ";" .. PI[4] .. ";1;1;100", 4)
      gg.toast(codeName .. " x " .. PI[1] .. " 已转换成 " .. codeName2 .. " x " .. PI[4] .. "!\n快去购买该物品。")
      gg.clearResults()
    end
  end
  main()
end
function preRun()
  gg.toast("\n弓箭传说脚本 \nby ItsSC")
  print("ItsSC => \"GameGuardian.net\"\n在 https://gameguardian.net/forum/files/file/1365-archero-script/ 提交问题。")
  main()
end
function main()
  gg.clearResults()
  gg.setVisible(false)
  gg.setRanges(gg.REGION_ANONYMOUS)
  mainChoiceC = gg.choice({
    "💰金币",
    "⚡体力和等级",
    "📦商店",
    "🎯能力",
    "📜物品",
    "💁资讯",
    "📝问题提交",
    "◀️返回游戏",
    "❌退出"
  }, nil, "首页\n弓箭传说脚本由ItsSC制作")
  if mainChoiceC == 1 then
    Gold()
  elseif mainChoiceC == 2 then
    Energy()
  elseif mainChoiceC == 3 then
    Store()
  elseif mainChoiceC == 4 then
    Stats()
  elseif mainChoiceC == 5 then
    exe(L0_0)
  elseif mainChoiceC == 6 then
    HelpC()
  elseif mainChoiceC == 7 then
    Prob()
  elseif mainChoiceC == 8 then
    sleep(100)
  elseif mainChoiceC == 9 then
    exit()
  elseif mainChoiceC == nil then
    sleep(100)
  end
end
function inputValueStats()
  s = gg.prompt({
    "生命",
    "攻击速度",
    "伤害值",
    "无敌模式(优先执行其他修改)"
  }, {
    false,
    false,
    false,
    false
  }, {
    "checkbox",
    "checkbox",
    "checkbox",
    "checkbox"
  })
  return input
end
function inputValuePoints()
  p = gg.prompt({"体力", "等级"}, {false, false}, {"checkbox", "checkbox"})
  return input
end
function Stats()
  gg.setVisible(false)
  gg.clearResults()
  R = gg.alert("如果你在这局使用宝石复活过，请重新开始新的一局。如果没复活过，选择继续。", "继续", nil, "返回首页")
  if R == 3 then
    main()
  end
  if R == nil then
    main()
  end
  if R == 1 then
    if addressTriggered == nil then
      gg.setVisible(false)
      searchFloat("1001D;1D;0;0;0;0;0;0;0;0::37")
      checkResultC()
      gg.refineNumber("0")
      checkResultC()
      for _FORV_3_, _FORV_4_ in ipairs(gg.getResults(1)) do
        addressGodMode = {
          {
            address = _FORV_4_.address + 64,
            flags = 16
          }
        }
        addressTriggered = {
          {
            address = _FORV_4_.address + 0,
            flags = 16
          },
          {
            address = _FORV_4_.address + 4,
            flags = 16
          },
          {
            address = _FORV_4_.address + 8,
            flags = 16
          },
          {
            address = _FORV_4_.address + 12,
            flags = 16
          }
        }
        addressSpeed = {
          {
            address = _FORV_4_.address + 68,
            flags = 16
          }
        }
        addressHealth = {
          {
            address = _FORV_4_.address + 48,
            flags = 4
          },
          {
            address = _FORV_4_.address + 56,
            flags = 4
          }
        }
        addressDamage = {
          {
            address = _FORV_4_.address + 76,
            flags = 4
          }
        }
      end
    else
      K = gg.alert("这回合是否与上次修改时的回合相同。", "是", nil, "不是")
      if K == 1 then
      end
      if K == nil then
        main()
      end
      if K == 3 then
        gg.setVisible(false)
        searchFloat("1001D;1D;0;0;0;0;0;0;0;0::37")
        checkResultC()
        gg.refineNumber("0")
        checkResultC()
        for _FORV_3_, _FORV_4_ in ipairs(gg.getResults(1)) do
          addressGodMode = {
            {
              address = _FORV_4_.address + 64,
              flags = 16
            }
          }
          addressTriggered = {
            {
              address = _FORV_4_.address + 0,
              flags = 16
            },
            {
              address = _FORV_4_.address + 4,
              flags = 16
            },
            {
              address = _FORV_4_.address + 8,
              flags = 16
            },
            {
              address = _FORV_4_.address + 12,
              flags = 16
            }
          }
          addressSpeed = {
            {
              address = _FORV_4_.address + 68,
              flags = 16
            }
          }
          addressHealth = {
            {
              address = _FORV_4_.address + 48,
              flags = 4
            },
            {
              address = _FORV_4_.address + 56,
              flags = 4
            }
          }
          addressDamage = {
            {
              address = _FORV_4_.address + 76,
              flags = 4
            }
          }
        end
      end
    end
    gg.setVisible(false)
    inputValueStats()
    if s[1] == true then
      gg.setVisible(false)
      addressHealth[1].flags = 4
      addressHealth[1].value = 99999
      addressHealth[2].flags = 4
      addressHealth[2].value = 99999
      gg.setValues(addressHealth)
    end
    if s[2] == true then
      gg.setVisible(false)
      addressTriggered[1].flags = 16
      addressTriggered[1].value = 55
      addressTriggered[2].flags = 16
      addressTriggered[2].value = 55
      addressTriggered[3].flags = 16
      addressTriggered[3].value = 55
      addressTriggered[4].flags = 16
      addressTriggered[4].value = 55
      addressSpeed[1].flags = 16
      addressSpeed[1].value = 0.5
      gg.setValues(addressTriggered)
      gg.setValues(addressSpeed)
    end
    if s[3] == true then
      gg.setVisible(false)
      addressTriggered[1].flags = 16
      addressTriggered[1].value = 55
      addressTriggered[2].flags = 16
      addressTriggered[2].value = 55
      addressTriggered[3].flags = 16
      addressTriggered[3].value = 55
      addressTriggered[4].flags = 16
      addressTriggered[4].value = 55
      addressDamage[1].flags = 16
      addressDamage[1].value = 30
      gg.setValues(addressDamage)
      if s[4] == true then
        gg.setVisible(false)
        addressGodMode[1].flags = 16
        addressGodMode[1].value = 999999999
        gg.setValues(addressGodMode)
      end
    end
    gg.clearResults()
    gg.toast("你的能力已修改！")
  end
  main()
end
function Gold()
  gg.setVisible(false)
  gg.clearResults()
  AG = gg.alert("进入游戏才执行", "继续", nil, "返回首页")
  if AG == nil then
    sleep(100)
  end
  if AG == 3 then
    main()
  end
  if AG == 1 then
    searchDword("36;0;36;112;112;32;14::25")
    checkResultC()
    gg.refineNumber("14")
    checkResultC()
    for _FORV_3_, _FORV_4_ in ipairs(gg.getResults(1)) do
      g = {
        {
          address = _FORV_4_.address + 256,
          flags = 16
        }
      }
    end
    g[1].flags = 16
    g[1].value = 500000
    gg.setValues(g)
    gg.clearResults()
    gg.toast("金币已修改为500000！")
    main()
  end
end
function Energy()
  gg.setVisible(false)
  gg.clearResults()
  AE = gg.alert("请在首页执行该修改。\n\n注释：修改等级只是为了解锁新技能。等级在重启后依然会重置。", "继续", nil, "返回首页")
  if AE == 1 then
    searchDword("257;7;10;0;1;0.40000000596F::21")
    checkResultC()
    for _FORV_3_, _FORV_4_ in ipairs(gg.getResults(1)) do
      gd = {
        {
          address = _FORV_4_.address + 5600,
          flags = 4
        }
      }
      tp = {
        {
          address = _FORV_4_.address + 5612,
          flags = 4
        }
      }
    end
    gg.setVisible(false)
    inputValuePoints()
    if p[1] == true then
      gd[1].flags = 4
      gd[1].value = 5000
      gg.setValues(gd)
    end
    if p[2] == true then
      tp[1].flags = 4
      tp[1].value = 100
      gg.setValues(tp)
    end
    gg.toast("修改已完成！")
    gg.clearResults()
  else
    main()
  end
  gg.clearResults()
  main()
end
function Store()
  gg.clearResults()
  gg.setVisible(false)
  searchDword("300;280;260::9")
  checkResultC()
  getResults(100)
  editAll(1, gg.TYPE_DWORD)
  gg.clearResults()
  gg.toast("只需使用1钻石就可购买黑曜石宝箱!")
  main()
end
function HelpC()
  gg.clearResults()
  gg.setVisible(false)
  if gg.alert("搜寻中游戏闪退\n确保你已经点选了(对游戏隐藏GameGuardian:)中的第二和第三选项。\n\n怎么使用？\n\n除了修改物品和体力以外，所有的修改都需要进入游戏回合才启动。\n\n无法修改？\n\n生命值，攻击速度和伤害值不会立刻改变，只有被打才会改变。\n金币会在回合结束收钱时才改变。\n体力修改必须在游戏开始前修改。体力修改要求的金币不是游戏内的而是首页右上角显示的。（如果只是视觉改变的请通知我）\n修改生命值后不要拿起任何提升生命的能力，不然生命值会重置回你原有的生命值。\n\n\n如果脚本有任何的问题，点击首页里的“问题提交”然后到GG官方网站留言给我知道。", "返回首页") == 1 then
    main()
  else
    main()
  end
end
function Prob()
  gg.clearResults()
  gg.copyText("https://gameguardian.net/forum/files/file/1365-archero-script/", true)
  gg.toast("连接已复制。\n粘贴到浏览器然后到评论区留言。")
  main()
end
function checkResultC()
  if gg.getResultCount() == 0 then
    gg.alert("查不到任何值！\n正在返回首页")
    main()
  end
end
function editAll(A0_7, A1_8)
  gg.editAll(A0_7, A1_8)
end
function searchFloat(A0_9)
  gg.searchNumber(A0_9, gg.TYPE_FLOAT)
end
function searchDword(A0_10)
  gg.searchNumber(A0_10, gg.TYPE_DWORD)
end
function searchAuto(A0_11)
  gg.searchNumber(A0_11, gg.TYPE_AUTO)
end
function getResults(A0_12)
  gg.getResults(A0_12)
end
function sleep(A0_13)
  gg.setVisible(false)
  while true do
    gg.sleep(A0_13)
    if gg.isVisible(true) then
      main()
      break
    end
  end
end
function exit()
  os.exit()
end
preRun()
